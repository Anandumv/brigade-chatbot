[
  {
    "file": "backend/test_2bhk_consistency.py",
    "passed": true,
    "duration": 2.49,
    "stdout": " to Pixeltable database at: sqlite:///./test_pixeltable.db\n--- 1. Testing Structured Filter (UI) ---\nUI Mapped Filters: bedrooms=[2] min_bedrooms=None max_bedrooms=None min_price_inr=None max_price_inr=None budget_inr=None city=None locality=None area=None possession_year=None possession_quarter=None min_area_sqft=None max_area_sqft=None status=None developer_name=None project_name=None property_type=None required_amenities=None\nStructured Results Count: 4\n\n--- 2. Testing Natural Language Query (NL) ---\nNL Extracted Filters: bedrooms=[2] min_bedrooms=None max_bedrooms=None min_price_inr=None max_price_inr=None budget_inr=None city=None locality=None area=None possession_year=None possession_quarter=None min_area_sqft=None max_area_sqft=None status=None developer_name=None project_name=None property_type=['apartment'] required_amenities=None\nNL Results Count: 4\n\n--- 3. Comparison ---\n\u2705 SUCCESS: Counts match!\nUI Bedrooms: [2]\nNL Bedrooms: [2]\n\u2705 SUCCESS: Filter Logic Identical (Bedrooms)\n",
    "stderr": "nandumv/Downloads/chatbot/backend/venv/bin/python3 -m pip install --upgrade pip' command.\nWARNING:services.hybrid_retrieval:Pixeltable tables not available: (sqlite3.OperationalError) unrecognized token: \":\"\n[SQL: SELECT tables.id AS tables_id, tables.dir_id AS tables_dir_id, tables.md AS tables_md, tableschemaversions.tbl_id AS tableschemaversions_tbl_id, tableschemaversions.schema_version AS tableschemaversions_schema_version, tableschemaversions.md AS tableschemaversions_md \nFROM tables JOIN tableversions ON tables.id = tableversions.tbl_id JOIN tableschemaversions ON tables.id = tableschemaversions.tbl_id \nWHERE (tableversions.md->>'version')::int = 0 AND (tables.md->>'current_schema_version')::int = tableschemaversions.schema_version ORDER BY (tableversions.md->>'created_at')::float]\n(Background on this error at: https://sqlalche.me/e/20/e3q8). Switching to MOCK DATA.\nWARNING:services.hybrid_retrieval:Pixeltable tables not available: No such path: brigade. Switching to MOCK DATA.\n"
  },
  {
    "file": "backend/test_arman_fixes.py",
    "passed": false,
    "duration": 0.35,
    "stdout": "",
    "stderr": "Traceback (most recent call last):\n  File \"/Users/anandumv/Downloads/chatbot/backend/test_arman_fixes.py\", line 10, in <module>\n    from services.flow_engine import FlowState, FlowRequirements, execute_flow\n  File \"/Users/anandumv/Downloads/chatbot/backend/services/flow_engine.py\", line 7, in <module>\n    from database.pixeltable_setup import get_projects_table\n  File \"/Users/anandumv/Downloads/chatbot/backend/database/pixeltable_setup.py\", line 8, in <module>\n    from pixeltable.iterators import DocumentSplitter\nModuleNotFoundError: No module named 'pixeltable.iterators'; 'pixeltable' is not a package\n"
  },
  {
    "file": "backend/test_calendar_reminders.py",
    "passed": true,
    "duration": 0.12,
    "stdout": "=======================================================\n\u2705 RM schedule retrieved\n   Total slots: 12\n   Available slots: 12\n   Busy slots: 0\n\n================================================================================\nTEST 11: Send Due Reminders\n================================================================================\n\u2705 Due reminders sent successfully\n   Sent: 1\n   Failed: 0\n   Pending: 3\n\n================================================================================\n\u2705 ALL CALENDAR & REMINDER TESTS PASSED\n================================================================================\n\nKey Features Tested:\n  \u2705 Calendar availability checking\n  \u2705 Calendar event creation\n  \u2705 Event rescheduling\n  \u2705 Event cancellation\n  \u2705 Slot blocking/freeing\n  \u2705 Visit reminder scheduling (24h + 1h)\n  \u2705 Reminder cancellation\n  \u2705 Integrated scheduling (calendar + reminders)\n  \u2705 RM schedule viewing\n  \u2705 Pending reminders query\n  \u2705 Sending due reminders\n\nTotal calendar events: 2\nTotal reminders: 5\n",
    "stderr": "02 - Prestige Falcon City on 2026-01-27\nINFO:services.reminder_service:\ud83d\udce7 24h reminder scheduled: reminder_000003 for 2026-01-27\nINFO:services.reminder_service:\ud83d\udcf1 1h reminder scheduled: reminder_000004 for 2026-01-27\nINFO:services.scheduling_service:\ud83d\udcc5 SITE VISIT SCHEDULED: visit_000001 for Prestige Falcon City on 2026-01-27\nINFO:services.scheduling_service:\ud83d\udcc5 Calendar event: cal_event_000002\nINFO:services.scheduling_service:\u23f0 Reminders scheduled: 2\nINFO:services.scheduling_service:\ud83d\udce7 CONFIRMATION EMAIL: jane@example.com (placeholder)\nINFO:services.scheduling_service:\ud83d\udcf1 CONFIRMATION SMS: +91 98765 55555 (placeholder)\nINFO:services.scheduling_service:\ud83d\udd14 RM NOTIFIED: Rajesh Kumar about Prestige Falcon City visit\nINFO:services.calendar_service:\ud83d\udcc5 EVENT RESCHEDULED: cal_event_000001 to 2026-01-27 afternoon\nINFO:services.calendar_service:\ud83d\udcc5 EVENT CANCELLED: cal_event_000001\nINFO:services.reminder_service:\ud83d\udcf1 SMS REMINDER: +91 99999 99999\nINFO:services.reminder_service:\u2705 REMINDER SENT: reminder_000005\n"
  },
  {
    "file": "backend/test_comprehensive_suite.py",
    "passed": false,
    "duration": 104.27,
    "stdout": "] Case: Negation Intent gpt_contextual_fallback not in allowed list. Missing expected chips ['Show RERA details', 'Explain payment plan']. Got ['Schedule site visit', 'Compare projects', 'Get more details']. \n\n\u001b[96m--- Case: Slang ---\u001b[0m\nQuery: \"I'm broke, give me cheap options\"\nResponse Intent: \u001b[93mgpt_contextual_fallback\u001b[0m\nChips: ['Schedule site visit', 'Compare projects', 'Get more details']\nTime: 13.34s\n[\u001b[91mFAIL\u001b[0m] Case: Slang Intent gpt_contextual_fallback not in allowed list. \n\n\u001b[93m=== PART 3: EXPLICIT FILTERS ===\u001b[0m\n\n\u001b[96m--- Case: Filter Override ---\u001b[0m\nQuery: \"Show me properties in Koramangala\"\nFilters: {'location': 'whitefield'}\nResponse Intent: \u001b[93mgpt_contextual_fallback\u001b[0m\nChips: ['Schedule site visit', 'Compare projects', 'Get more details']\nTime: 13.63s\n[\u001b[91mFAIL\u001b[0m] Case: Filter Override Expected intent property_search, got gpt_contextual_fallback. \n\n========================================\nFINAL SCORE: 0/8 Passed\n========================================\n",
    "stderr": "/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020\n  warnings.warn(\n"
  },
  {
    "file": "backend/test_continuous_conversation.py",
    "passed": false,
    "duration": 25.6,
    "stdout": "code': 'insufficient_quota'}}\n\n\u274c Budget advice\n   Query: \"How can I afford this?\"\n   Expected: sales_conversation \u2192 gpt_generation\n   Got: unsupported \u2192 database\n   Reasoning: Classification error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n\n\u274c Location advice\n   Query: \"Why should I buy in Whitefield?\"\n   Expected: sales_conversation \u2192 gpt_generation\n   Got: unsupported \u2192 database\n   Reasoning: Classification error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n\n",
    "stderr": "tion failed: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nGPT classification failed: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nGPT classification failed: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n"
  },
  {
    "file": "backend/test_conversation_coaching.py",
    "passed": true,
    "duration": 0.13,
    "stdout": "t Score Calculation\n================================================================================\n\n\u2705 Low Engagement: Score = 0.3 (expected: 0-3)\n\n\u274c Medium Engagement: Score = 2.8 (expected: 4-7)\n\n\u2705 High Engagement: Score = 7.3 (expected: 7-10)\n\n================================================================================\nTEST: Locality Comparison - Whitefield vs Sarjapur\n================================================================================\n\nWhitefield:\n  avg_price: \u20b96800/sqft\n  appreciation: 12.5%\n  rental_yield: 3.2%\n  trend: high_demand\n\nSarjapur:\n  avg_price: \u20b95900/sqft\n  appreciation: 14.2%\n  rental_yield: 3.5%\n  trend: emerging_hotspot\n\nWinners:\n  appreciation: Sarjapur\n  affordability: Sarjapur\n  rental_yield: Sarjapur\n  price_difference: 15.3%\n\n\u2705 PASS: Locality comparison working\n\n================================================================================\n\u2705 ALL TESTS COMPLETED\n================================================================================\n",
    "stderr": "INFO:services.market_intelligence:Loaded market data for 10 localities\nINFO:services.session_manager:Created new session: test_site_visit_001\nINFO:services.session_manager:\u2705 Session saved: Context preserved (projects: 3, filters: False)\nINFO:services.session_manager:Created new session: test_budget_obj_001\nINFO:services.session_manager:\u2705 Session saved: Context preserved (projects: 1, filters: True)\nWARNING:services.conversation_director:Missing template variable: 'market_data_provided'\nWARNING:services.conversation_director:Missing script template variable: 'urgency_context'\n"
  },
  {
    "file": "backend/test_conversation_flows.py",
    "passed": true,
    "duration": 10.08,
    "stdout": "=============================================================================\nTEST 1: HAPPY PATH - Immediate Interest\n\n================================================================================\n\nConnected to Pixeltable database at: sqlite:///./test_pixeltable.db\n\n\u274c TEST FAILED WITH ERROR: (sqlite3.OperationalError) unrecognized token: \":\"\n[SQL: SELECT tables.id AS tables_id, tables.dir_id AS tables_dir_id, tables.md AS tables_md, tableschemaversions.tbl_id AS tableschemaversions_tbl_id, tableschemaversions.schema_version AS tableschemaversions_schema_version, tableschemaversions.md AS tableschemaversions_md \nFROM tables JOIN tableversions ON tables.id = tableversions.tbl_id JOIN tableschemaversions ON tables.id = tableschemaversions.tbl_id \nWHERE (tableversions.md->>'version')::int = 0 AND (tables.md->>'current_schema_version')::int = tableschemaversions.schema_version ORDER BY (tableversions.md->>'created_at')::float]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n",
    "stderr": "y/engine/base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.OperationalError: (sqlite3.OperationalError) unrecognized token: \":\"\n[SQL: SELECT tables.id AS tables_id, tables.dir_id AS tables_dir_id, tables.md AS tables_md, tableschemaversions.tbl_id AS tableschemaversions_tbl_id, tableschemaversions.schema_version AS tableschemaversions_schema_version, tableschemaversions.md AS tableschemaversions_md \nFROM tables JOIN tableversions ON tables.id = tableversions.tbl_id JOIN tableschemaversions ON tables.id = tableschemaversions.tbl_id \nWHERE (tableversions.md->>'version')::int = 0 AND (tables.md->>'current_schema_version')::int = tableschemaversions.schema_version ORDER BY (tableversions.md->>'created_at')::float]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"
  },
  {
    "file": "backend/test_conversational_flows.py",
    "passed": true,
    "duration": 137.99,
    "stdout": "t property in Bangalore!\n\nI can assist with:\n- \ud83c\udfe0 Property search based on your budget and preferences\n- \ud83d\udcca Project ...\n   [Intent: gpt_contextual_fallback]\n\n\ud83d\udcdd SCENARIO 4: Trust & Meeting Flow\n\ud83d\udd39 Starting new conversation session: 9a712309-5221-473b-8ac7-7aed2e402865\n\n\ud83d\udc64 User: Why should I buy through Pinclick?\n\ud83e\udd16 Bot (9.09s): \u2022 I'm here to help you find the perfect property in **Bangalore**!\n\nI can assist with:\n- **Property search** (budget, config, location)\n- **Project de...\n   [Intent: unsupported]\n\n\ud83d\udc64 User: Can't you just send details on WhatsApp?\n\ud83e\udd16 Bot (9.24s): I'm here to help you find the perfect property in Bangalore!\n\nI can assist with:\n- \ud83c\udfe0 Property search based on your budget and preferences\n- \ud83d\udcca Project ...\n   [Intent: gpt_contextual_fallback]\n\n\ud83d\udc64 User: Okay let's meet tomorrow\n\ud83e\udd16 Bot (13.65s): I'm here to help you find the perfect property in Bangalore!\n\nI can assist with:\n- \ud83c\udfe0 Property search based on your budget and preferences\n- \ud83d\udcca Project ...\n   [Intent: gpt_contextual_fallback]\n",
    "stderr": "/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020\n  warnings.warn(\n"
  },
  {
    "file": "backend/test_corner_cases.py",
    "passed": true,
    "duration": 93.53,
    "stdout": "xpected: ['property_search', 'sales_faq'])\u001b[0m\n\n\u001b[93m--- Emotional ---\u001b[0m\nQuery: I am scared the project will be delayed\nStatus: \u001b[92m200 OK\u001b[0m (9.57s)\nIntent: gpt_contextual_fallback\nAnswer Snippet: I'm here to help you find the perfect property in Bangalore!\n\nI can assist with:\n- \ud83c\udfe0 Property search...\n\u001b[91m\u26a0\ufe0f CHECK: Got 'gpt_contextual_fallback' (Expected: intelligent_sales_objection)\u001b[0m\n\n\u001b[93m--- Comparison ---\u001b[0m\nQuery: Is Brigade better or Prestige?\nStatus: \u001b[92m200 OK\u001b[0m (13.64s)\nIntent: gpt_contextual_fallback\nAnswer Snippet: I'm here to help you find the perfect property in Bangalore!\n\nI can assist with:\n- \ud83c\udfe0 Property search...\n\u001b[91m\u26a0\ufe0f CHECK: Got 'gpt_contextual_fallback' (Expected: comparison)\u001b[0m\n\n\u001b[93m--- Mixed Intent ---\u001b[0m\nQuery: What is the price of 3BHK and is it a good investment?\nStatus: \u001b[92m200 OK\u001b[0m (13.7s)\nIntent: unsupported\nAnswer Snippet: \u2022 I'm here to help you find the perfect property in **Bangalore**!\n\nI can assist with:\n- **Property ...\n\u001b[92m\u2705 PASS\u001b[0m\n",
    "stderr": "/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020\n  warnings.warn(\n"
  },
  {
    "file": "backend/test_dynamic_chips.py",
    "passed": true,
    "duration": 40.08,
    "stdout": "Waiting for server...\n\ud83d\udd39 Testing Dynamic Chips (Suggested Actions)...\n\nSending Query: 'It is too expensive for me'\nStatus: 200\nIntent: unsupported\nSuggested Actions: []\n\u26a0\ufe0f FAIL: Did not find chip containing 'Stick to budget'\n\nSending Query: 'Suggest another location'\nStatus: 200\nIntent: unsupported\nSuggested Actions: []\n\u26a0\ufe0f FAIL: Did not find chip containing 'Stick to my location'\n\nSending Query: 'I want to visit'\nStatus: 200\nIntent: unsupported\nSuggested Actions: []\n\u26a0\ufe0f FAIL: Did not find chip containing 'Send Location'\n",
    "stderr": "/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020\n  warnings.warn(\n"
  },
  {
    "file": "backend/test_filters_explicit.py",
    "passed": true,
    "duration": 26.44,
    "stdout": "Waiting for server...\n\ud83d\udd39 Testing Explicit Filters Payload...\n\nTest 1: Vague Query ('Show me flats') + Filter (3BHK, Whitefield)\nStatus: 200\nIntent: unsupported\nAnswer Preview: \u2022 I'm here to help you find the perfect property in **Bangalore**!\n\nI can assist with:\n- **Property ...\n\u26a0\ufe0f CHECK: Filters might not be applied\n\nTest 2: Conflict ('2BHK in Koramangala') + Filter (3BHK, Whitefield)\nStatus: 200\nIntent: unsupported\nAnswer Preview: \u2022 I'm here to help you find the perfect property in **Bangalore**!\n\nI can assist with:\n- **Property ...\n\u26a0\ufe0f CHECK: Location Filter failed to override\n",
    "stderr": "/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020\n  warnings.warn(\n"
  },
  {
    "file": "backend/test_flow_output.py",
    "passed": false,
    "duration": 7.12,
    "stdout": "================================================================================\nTesting Flow Engine - Property Search with Complete Details\n================================================================================\n\nQuery: 3BHK in Whitefield under 1.5 Cr\nSession ID: test_session_123\n\n--------------------------------------------------------------------------------\nConnected to Pixeltable database at: sqlite:///./test_pixeltable.db\n",
    "stderr": "y/engine/base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.OperationalError: (sqlite3.OperationalError) unrecognized token: \":\"\n[SQL: SELECT tables.id AS tables_id, tables.dir_id AS tables_dir_id, tables.md AS tables_md, tableschemaversions.tbl_id AS tableschemaversions_tbl_id, tableschemaversions.schema_version AS tableschemaversions_schema_version, tableschemaversions.md AS tableschemaversions_md \nFROM tables JOIN tableversions ON tables.id = tableversions.tbl_id JOIN tableschemaversions ON tables.id = tableschemaversions.tbl_id \nWHERE (tableversions.md->>'version')::int = 0 AND (tables.md->>'current_schema_version')::int = tableschemaversions.schema_version ORDER BY (tableversions.md->>'created_at')::float]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"
  },
  {
    "file": "backend/test_flows.py",
    "passed": true,
    "duration": 89.79,
    "stdout": "e**!\n\nI can assist with:\n- **Property search** (budget, config, location)\n- **Project de...\n\u26a0\ufe0f  CHECK - content might differ from expectation\n--------------------------------------------------\nTest 7: FAQ - Face to Face\nQuery: Why do I need to meet you? Can't you send details on WhatsApp?\nStatus: 200 (7.97s)\nIntent: unsupported\nAnswer Snippet: \u2022 I'm here to help you find the perfect property in **Bangalore**!\n\nI can assist with:\n- **Property search** (budget, config, location)\n- **Project de...\n\u26a0\ufe0f  CHECK - content might differ from expectation\n--------------------------------------------------\nTest 8: FAQ - Pinclick Value\nQuery: Why should I buy through Pinclick and not directly?\nStatus: 200 (4.38s)\nIntent: unsupported\nAnswer Snippet: \u2022 I'm here to help you find the perfect property in **Bangalore**!\n\nI can assist with:\n- **Property search** (budget, config, location)\n- **Project de...\n\u26a0\ufe0f  CHECK - content might differ from expectation\n--------------------------------------------------\n",
    "stderr": "/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020\n  warnings.warn(\n"
  },
  {
    "file": "backend/test_full_lifecycle.py",
    "passed": false,
    "duration": 6.98,
    "stdout": " INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\n2026-01-24 14:41:51,583 - openai._base_client - INFO - Retrying request to /chat/completions in 0.827977 seconds\n2026-01-24 14:41:52,762 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\n2026-01-24 14:41:52,762 - services.flow_engine - ERROR - Intent classification failed: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n2026-01-24 14:41:52,762 - services.flow_engine - INFO - Router Intent: ambiguous | Project: None\nConnected to Pixeltable database at: sqlite:///./test_pixeltable.db\n2026-01-24 14:41:52,775 - root - INFO - running web server at http://127.0.0.1:57709\n",
    "stderr": "y/engine/base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.OperationalError: (sqlite3.OperationalError) unrecognized token: \":\"\n[SQL: SELECT tables.id AS tables_id, tables.dir_id AS tables_dir_id, tables.md AS tables_md, tableschemaversions.tbl_id AS tableschemaversions_tbl_id, tableschemaversions.schema_version AS tableschemaversions_schema_version, tableschemaversions.md AS tableschemaversions_md \nFROM tables JOIN tableversions ON tables.id = tableversions.tbl_id JOIN tableschemaversions ON tables.id = tableschemaversions.tbl_id \nWHERE (tableversions.md->>'version')::int = 0 AND (tables.md->>'current_schema_version')::int = tableschemaversions.schema_version ORDER BY (tableversions.md->>'created_at')::float]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"
  },
  {
    "file": "backend/test_full_spectrum.py",
    "passed": false,
    "duration": 31.93,
    "stdout": "p you find the perfect property in Bangalore!\n\nI can assist with:\n- \ud83c\udfe0 Property search...\n\u001b[91mFAILED: Expected intent 'property_search', got 'gpt_contextual_fallback'\u001b[0m\n\n\u001b[93m--- Testing Level 5: Objection (Budget) ---\u001b[0m\nQuery: That is way too expensive for me\nStatus: \u001b[92m200 OK\u001b[0m (4.49s)\nIntent: gpt_contextual_fallback\nAnswer Snippet: I'm here to help you find the perfect property in Bangalore!\n\nI can assist with:\n- \ud83c\udfe0 Property search...\n\u001b[91mFAILED: Expected intent 'intelligent_sales_objection', got 'gpt_contextual_fallback'\u001b[0m\n\n\u001b[93m--- Testing Level 6: Contextual Follow-up ---\u001b[0m\nQuery: How can I stretch my budget then?\nStatus: \u001b[92m200 OK\u001b[0m (4.25s)\nIntent: gpt_contextual_fallback\nAnswer Snippet: I'm here to help you find the perfect property in Bangalore!\n\nI can assist with:\n- \ud83c\udfe0 Property search...\n\u001b[91mFAILED: Expected intent 'intelligent_sales_faq', got 'gpt_contextual_fallback'\u001b[0m\n\n==============================\nTEST SUMMARY: 0/6 PASSED\n==============================\n",
    "stderr": "/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020\n  warnings.warn(\n"
  },
  {
    "file": "backend/test_intelligent_fallback.py",
    "passed": true,
    "duration": 9.18,
    "stdout": "tives:\n\n1. \ud83c\udfe0 **Sattva Park Cubix phase 2** (0.0 km away)   \u2022 \ud83d\udccd Devanhalli, North Bangalore, North Bangalore   \u2022 \ud83d\udcb0 Starting at **\u20b90.83 Cr**   \u2022 \ud83c\udfd7\ufe0f Under Construction | Possession: Q4 2029\n\n2. \ud83c\udfe0 **UKN Belvedere** (0.0 km away)   \u2022 \ud83d\udccd Devanhalli, North Bangalore, North Bangalore   \u2022 \ud83d\udcb0 Starting at **\u20b90.90 Cr**   \u2022 \ud83c\udfd7\ufe0f Ready to Move | Possession: Q4 2028\n\n3. \ud83c\udfe0 **Tata Varnam** (0.0 km away)   \u2022 \ud83d\udccd Chokkahalli, North Bangalore, North Bangalore   \u2022 \ud83d\udcb0 Starting at **\u20b91.03 Cr**   \u2022 \ud83c\udfd7\ufe0f Under Construction | Possession: Q4 2030\n\n\u2022 Would you like more details or a **site visit** for any of these? \ud83d\udcde\n--------------------------------------------------------------------------------\n\n\u2705 Quality Checks:\n  \u2705 Has emoji\n  \u2705 Mentions distance\n  \u2705 Mentions budget/price\n  \u2705 Has call-to-action\n  \u2705 Professional tone\n  \u2705 Value-focused\n\nQuality Score: 6/6 (100.0%)\n\ud83c\udf89 Sales pitch quality is EXCELLENT!\n\n================================================================================\n\n\n\u2705 Test suite completed successfully!\n\n",
    "stderr": " your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nERROR:services.intelligent_fallback:Error generating pitch: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nERROR:services.intelligent_fallback:Error generating pitch: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n"
  },
  {
    "file": "backend/test_proactive_nudger.py",
    "passed": true,
    "duration": 0.09,
    "stdout": "===========================================================\n\u2705 No nudge when no pattern detected (clean)\n\n================================================================================\nTEST 10: Nudge History Tracking\n================================================================================\n\u2705 Nudge history tracked successfully\n   Nudges shown: 1\n   Last nudge time: 2026-01-24 14:42:35.480824\n\n================================================================================\n\u2705 ALL PROACTIVE NUDGER TESTS PASSED\n================================================================================\n\nKey Features Tested:\n  \u2705 Repeat views detection (3+ views)\n  \u2705 Decision readiness (5+ properties viewed)\n  \u2705 Location focus (3+ mentions)\n  \u2705 Budget concerns (2+ objections)\n  \u2705 Long session (15+ minutes)\n  \u2705 Abandoned interest (interested but no visit)\n  \u2705 Nudge cooldown (10-minute spacing)\n  \u2705 Priority order (high > medium > low)\n  \u2705 No false positives (clean cases)\n  \u2705 Nudge history tracking\n",
    "stderr": "INFO:services.proactive_nudger:\ud83c\udfaf PROACTIVE NUDGE: repeat_views (priority: high)\nINFO:services.proactive_nudger:\ud83c\udfaf PROACTIVE NUDGE: decision_readiness (priority: high)\nINFO:services.proactive_nudger:\ud83c\udfaf PROACTIVE NUDGE: location_focus (priority: medium)\nINFO:services.proactive_nudger:\ud83c\udfaf PROACTIVE NUDGE: budget_concern (priority: medium)\nINFO:services.proactive_nudger:\ud83c\udfaf PROACTIVE NUDGE: long_session (priority: low)\nINFO:services.proactive_nudger:\ud83c\udfaf PROACTIVE NUDGE: abandoned_interest (priority: low)\nINFO:services.proactive_nudger:\ud83c\udfaf PROACTIVE NUDGE: repeat_views (priority: high)\nINFO:services.proactive_nudger:\ud83c\udfaf PROACTIVE NUDGE: repeat_views (priority: high)\n"
  },
  {
    "file": "backend/test_project_selection.py",
    "passed": false,
    "duration": 7.14,
    "stdout": " INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\n2026-01-24 14:42:39,934 - openai._base_client - INFO - Retrying request to /chat/completions in 0.968433 seconds\n2026-01-24 14:42:41,179 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\n2026-01-24 14:42:41,180 - services.flow_engine - ERROR - Intent classification failed: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n2026-01-24 14:42:41,180 - services.flow_engine - INFO - Router Intent: ambiguous | Project: None\nConnected to Pixeltable database at: sqlite:///./test_pixeltable.db\n2026-01-24 14:42:41,192 - root - INFO - running web server at http://127.0.0.1:57827\n",
    "stderr": "y/engine/base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.OperationalError: (sqlite3.OperationalError) unrecognized token: \":\"\n[SQL: SELECT tables.id AS tables_id, tables.dir_id AS tables_dir_id, tables.md AS tables_md, tableschemaversions.tbl_id AS tableschemaversions_tbl_id, tableschemaversions.schema_version AS tableschemaversions_schema_version, tableschemaversions.md AS tableschemaversions_md \nFROM tables JOIN tableversions ON tables.id = tableversions.tbl_id JOIN tableschemaversions ON tables.id = tableschemaversions.tbl_id \nWHERE (tableversions.md->>'version')::int = 0 AND (tables.md->>'current_schema_version')::int = tableschemaversions.schema_version ORDER BY (tableversions.md->>'created_at')::float]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"
  },
  {
    "file": "backend/test_radius_pivot.py",
    "passed": false,
    "duration": 6.93,
    "stdout": "=== Testing 10km Radius Location Pivot (Sarjapur Road -> Gunjur) ===\n\nTurn 1: Requesting Sarjapur Road under 1.2 Cr\nConnected to Pixeltable database at: sqlite:///./test_pixeltable.db\n",
    "stderr": "y/engine/base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.OperationalError: (sqlite3.OperationalError) unrecognized token: \":\"\n[SQL: SELECT tables.id AS tables_id, tables.dir_id AS tables_dir_id, tables.md AS tables_md, tableschemaversions.tbl_id AS tableschemaversions_tbl_id, tableschemaversions.schema_version AS tableschemaversions_schema_version, tableschemaversions.md AS tableschemaversions_md \nFROM tables JOIN tableversions ON tables.id = tableversions.tbl_id JOIN tableschemaversions ON tables.id = tableschemaversions.tbl_id \nWHERE (tableversions.md->>'version')::int = 0 AND (tables.md->>'current_schema_version')::int = tableschemaversions.schema_version ORDER BY (tableversions.md->>'created_at')::float]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\n"
  },
  {
    "file": "backend/test_redis_assist.py",
    "passed": false,
    "duration": 4.79,
    "stdout": "\n\u001b[0m\n\u001b[94m\u2139\ufe0f  Testing Redis connection...\u001b[0m\n\u001b[93m\u26a0\ufe0f  Redis unhealthy: {'redis_available': False, 'fallback_mode': 'in-memory', 'status': 'degraded'}\u001b[0m\n\u001b[94m\u2139\ufe0f  Testing /assist endpoint (local server must be running)...\u001b[0m\n\u001b[92m\u2705 Health check passed: healthy\u001b[0m\n\u001b[94m\u2139\ufe0f  Redis status: degraded\u001b[0m\n\u001b[91m\u274c /assist endpoint failed: 500\u001b[0m\n\u001b[91m\u274c {\"detail\":\"Internal server error: 1 validation error for CopilotResponse\\nanswer\\n  List should have at most 15 items after validation, not 16 [type=too_long, input_value=['1. **Mana Skanda The Ri...ct]' for deeper pitch*\\\"], input_type=list]\\n    For further information visit https://errors.pydantic.dev/2.12/v/too_long\"}\u001b[0m\n\n\u001b[94m============================================================\u001b[0m\n\u001b[94m  Test Summary\u001b[0m\n\u001b[94m============================================================\u001b[0m\n\n\u001b[91m\u274c Redis Connection: FAILED\u001b[0m\n\u001b[91m\u274c /assist Endpoint: FAILED\u001b[0m\n\n\u001b[94mTotal: 0/2 tests passed\u001b[0m\n\n\u001b[91m\u274c Some tests failed. Check logs above.\u001b[0m\n",
    "stderr": "/Users/anandumv/Downloads/chatbot/backend/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020\n  warnings.warn(\n\u26a0\ufe0f Redis connection failed: Error 61 connecting to localhost:6379. Connection refused.\n"
  },
  {
    "file": "backend/test_routing_fix.py",
    "passed": false,
    "duration": 38.93,
    "stdout": "er of Sobha Neopolis\n  Expected: project_facts \u2192 database\n  Got: unsupported \u2192 database\n\nQuery: Possession date of Brigade Citrine\n  Expected: project_facts \u2192 database\n  Got: unsupported \u2192 database\n\nQuery: Too expensive\n  Expected: sales_conversation \u2192 gpt_generation\n  Got: unsupported \u2192 database\n\nQuery: How to stretch my budget?\n  Expected: sales_conversation \u2192 gpt_generation\n  Got: unsupported \u2192 database\n\nQuery: Investment potential of Whitefield\n  Expected: sales_conversation \u2192 gpt_generation\n  Got: unsupported \u2192 database\n\nQuery: Whitefield vs Sarjapur comparison\n  Expected: sales_conversation \u2192 gpt_generation\n  Got: unsupported \u2192 database\n\nQuery: How far is airport from Avalon?\n  Expected: sales_conversation \u2192 gpt_generation\n  Got: unsupported \u2192 database\n\nQuery: Nearby schools to Citrine\n  Expected: sales_conversation \u2192 gpt_generation\n  Got: unsupported \u2192 database\n\nQuery: Why should I buy in Whitefield?\n  Expected: sales_conversation \u2192 gpt_generation\n  Got: unsupported \u2192 database\n\n",
    "stderr": "tion failed: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nGPT classification failed: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nGPT classification failed: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n"
  },
  {
    "file": "backend/test_scheduling.py",
    "passed": true,
    "duration": 0.15,
    "stdout": "=====================================\n\u2705 URGENT: Within 30 minutes\n\u2705 HIGH: Within 1-2 hours\n\u2705 MEDIUM: Within 4 hours\n\u2705 LOW: Within 24 hours\n\n================================================================================\nTEST 11: RM Assignment\n================================================================================\n\u2705 RM assignment works correctly (round-robin)\n   RMs assigned: Amit Patel, Priya Sharma, Rajesh Kumar\n\n================================================================================\n\u2705 ALL SCHEDULING TESTS PASSED\n================================================================================\n\nKey Features Tested:\n  \u2705 Site visit scheduling\n  \u2705 Visit status updates\n  \u2705 Callback requests\n  \u2705 Callback status updates\n  \u2705 User visit history\n  \u2705 User callback history\n  \u2705 Multiple visits per user\n  \u2705 Urgency levels (urgent/high/medium/low)\n  \u2705 RM round-robin assignment\n  \u2705 Lead score tracking\n  \u2705 Notes and timestamps\n\nTotal visits scheduled: 8\nTotal callbacks requested: 5\n",
    "stderr": "eduling_service:\ud83d\udcc5 Calendar event: cal_event_000007\nINFO:services.scheduling_service:\u23f0 Reminders scheduled: 1\nINFO:services.scheduling_service:\ud83d\udce7 CONFIRMATION EMAIL: None (placeholder)\nINFO:services.scheduling_service:\ud83d\udcf1 CONFIRMATION SMS: +91 999900004 (placeholder)\nINFO:services.scheduling_service:\ud83d\udd14 RM NOTIFIED: Rajesh Kumar about Property 4 visit\nINFO:services.calendar_service:\ud83d\udcc5 CALENDAR EVENT CREATED: cal_event_000008 - Property 5 on 2026-01-30\nINFO:services.reminder_service:\ud83d\udcf1 1h reminder scheduled: reminder_000010 for 2026-01-30\nINFO:services.scheduling_service:\ud83d\udcc5 SITE VISIT SCHEDULED: visit_000008 for Property 5 on 2026-01-30\nINFO:services.scheduling_service:\ud83d\udcc5 Calendar event: cal_event_000008\nINFO:services.scheduling_service:\u23f0 Reminders scheduled: 1\nINFO:services.scheduling_service:\ud83d\udce7 CONFIRMATION EMAIL: None (placeholder)\nINFO:services.scheduling_service:\ud83d\udcf1 CONFIRMATION SMS: +91 999900005 (placeholder)\nINFO:services.scheduling_service:\ud83d\udd14 RM NOTIFIED: Priya Sharma about Property 5 visit\n"
  },
  {
    "file": "backend/test_sentiment_analysis.py",
    "passed": true,
    "duration": 0.41,
    "stdout": "unity\n    - create_urgency_naturally\n  Avoid:\n    - over_complicating\n    - introducing_doubts\n\n\u2705 PASS: Tone adaptation working correctly\n\n================================================================================\nTEST: Empathy Statement Generation\n================================================================================\n\nFrustrated about budget:\n  \"I'm truly sorry you're experiencing this. Your time is valuable. Budget is one of the most important factors in this decision.\"\n\nUncertain about location:\n  \"I can see you have some questions, and that's completely natural. Location is absolutely critical, and I understand your concern.\"\n\nPositive interaction:\n  \"That's great to hear!\"\n\nExcited customer:\n  \"Your excitement is contagious!\"\n\n\u2705 PASS: Empathy statements generated correctly\n\n================================================================================\n\u2705 ALL SENTIMENT TESTS COMPLETED\n================================================================================\n",
    "stderr": ""
  },
  {
    "file": "backend/test_sentiment_simple.py",
    "passed": false,
    "duration": 0.02,
    "stdout": "yed with this\"\n   Expected: frustrated, Got: frustrated, Frustration: 9/10\n\n\u2705 \"I'm worried about the price, it's too expensive\"\n   Expected: negative, Got: negative, Frustration: 4/10\n\n\u274c \"I'm uncertain if this is right for me\"\n   Expected: negative, Got: neutral, Frustration: 0/10\n\n\u2705 \"What is the price?\"\n   Expected: neutral, Got: neutral, Frustration: 0/10\n\n\u2705 \"Show me the floor plan\"\n   Expected: neutral, Got: neutral, Frustration: 0/10\n\n\u2705 \"This sounds good, thanks!\"\n   Expected: positive, Got: positive, Frustration: 0/10\n\n\u2705 \"Great, that's helpful\"\n   Expected: positive, Got: positive, Frustration: 0/10\n\n\u2705 \"This is amazing! I love it!\"\n   Expected: excited, Got: excited, Frustration: 0/10\n\n\u2705 \"Perfect! Exactly what I wanted!\"\n   Expected: excited, Got: excited, Frustration: 0/10\n\n================================================================================\nResults: 9/10 passed (90%)\n================================================================================\n\n\u26a0\ufe0f  1 tests failed\n",
    "stderr": ""
  },
  {
    "file": "backend/test_user_profiles.py",
    "passed": true,
    "duration": 0.1,
    "stdout": "   Total Sessions: 4\n   Properties Viewed: 2\n   Interested Projects: 1\n   Lead Temperature: cold\n   Engagement Score: 4.025/10\n   Intent Score: 2.5/10\n   Preferences: {'budget': '\u20b9180.0-250.0 Cr', 'configurations': ['2BHK', '3BHK'], 'locations': ['Whitefield', 'Sarjapur']}\n\n================================================================================\nTEST 10: Hot Leads Identification\n================================================================================\n\u2705 Hot leads identified: 0 leads\n\n================================================================================\n\u2705 ALL USER PROFILE TESTS PASSED\n================================================================================\n\nTotal profiles: 3\nHot leads: 0\n\nKey Features Tested:\n  \u2705 Profile creation and retrieval\n  \u2705 Preference management\n  \u2705 Property view tracking\n  \u2705 Interest marking\n  \u2705 Objection tracking\n  \u2705 Sentiment history\n  \u2705 Lead scoring\n  \u2705 Welcome back messages\n  \u2705 Profile summaries\n  \u2705 Hot leads identification\n",
    "stderr": "r:Loaded existing profile for user test_user_hot (sessions: 3)\nINFO:services.user_profile_manager:Tracked property view for user test_user_hot: Project A\nINFO:services.user_profile_manager:Loaded existing profile for user test_user_hot (sessions: 3)\nINFO:services.user_profile_manager:Tracked property view for user test_user_hot: Project B\nINFO:services.user_profile_manager:Loaded existing profile for user test_user_hot (sessions: 3)\nINFO:services.user_profile_manager:Tracked property view for user test_user_hot: Project C\nINFO:services.user_profile_manager:Loaded existing profile for user test_user_hot (sessions: 3)\nINFO:services.user_profile_manager:Marked interest for user test_user_hot: Project A (high)\nINFO:services.user_profile_manager:Loaded existing profile for user test_user_hot (sessions: 3)\nINFO:services.user_profile_manager:Marked interest for user test_user_hot: Project B (high)\nINFO:services.user_profile_manager:Loaded existing profile for user test_user_hot (sessions: 3)\n"
  },
  {
    "file": "backend/tests/test_production_readiness.py",
    "passed": false,
    "duration": 2.5,
    "stdout": "Connected to Pixeltable database at: sqlite:///./test_pixeltable.db\n\n--- TEST: COMPARISON FLOW ---\n\n--- TEST: ERROR RESILIENCE (LLM CRASH) ---\nSystem Action (Fallback): 1. **Mana Skanda The Right Life** | Under Construction\n\ud83d\udccd Sarjapur Road, East Bangalore | 2BHK, 3 BHK\n\ud83d\udcb0 \u20b91.35 Cr - \u20b91.85 Cr\n\n2. **Birla Evara** | Under Construction\n\ud83d\udccd Sarjapur Road, East Bangalore | 3 BHK, 4 BHK\n\ud83d\udcb0 \u20b92.20 Cr - \u20b92.90 Cr\n\n3. **Sobha Neopolis** | Under Construction\n\ud83d\udccd Panathur Road, East Bangalore | 3 BHK, 4 BHK\n\ud83d\udcb0 \u20b92.90 Cr - \u20b93.94 Cr\n\n4. **Sumadhura Folium Phase - 3** | Under Construction\n\ud83d\udccd Borewell Road,Whitefield, East Bangalore | 3 BHK, 4 BHK\n\ud83d\udcb0 \u20b92.40 Cr - \u20b93.80 Cr\n\n5. **Century Mirai** | Under Construction\n\ud83d\udccd Marathahalli, East Bangalore | 2 BHK, 3 BHK, 4 BHK\n\ud83d\udcb0 \u20b92.16 Cr - \u20b94.84 Cr\n\n\n\ud83d\udc49 *Say 'Details of [Project]' for deeper pitch*\n\n--- TEST: OBJECTION HANDLING ---\n",
    "stderr": "_history)\n  File \"/Users/anandumv/Downloads/chatbot/backend/services/flow_engine.py\", line 417, in execute_sales_copilot_flow\n    projects_table = get_projects_table()\n  File \"/Users/anandumv/Downloads/chatbot/backend/database/pixeltable_setup.py\", line 321, in get_projects_table\n    return pxt.get_table('brigade.projects')\n  File \"/Users/anandumv/Downloads/chatbot/backend/vendor/pixeltable/globals.py\", line 413, in get_table\n    Catalog.get().paths.check_is_valid(p, expected=catalog.Table)\n  File \"/Users/anandumv/Downloads/chatbot/backend/vendor/pixeltable/catalog/path_dict.py\", line 145, in check_is_valid\n    obj = self.get_object(path)\n  File \"/Users/anandumv/Downloads/chatbot/backend/vendor/pixeltable/catalog/path_dict.py\", line 89, in get_object\n    raise excs.Error(f'No such path: {\".\".join(path.components[:i + 1])}')\npixeltable.exceptions.Error: No such path: brigade\n\n----------------------------------------------------------------------\nRan 3 tests in 0.013s\n\nFAILED (errors=2)\n"
  },
  {
    "file": "backend/tests/test_sales_copilot.py",
    "passed": true,
    "duration": 2.18,
    "stdout": " **Alembic City Cloud Forest** | Under Construction\n\ud83d\udccd Hopefarm Junction, whitefield, East Bangalore | 2BHK, 3 BHK, 3.5 BHK\n\ud83d\udcb0 \u20b92.00 Cr - \u20b93.50 Cr\n\n4. **Brigade Avalon** | Under Construction\n\ud83d\udccd Whitefield, Bangalore, East Bangalore | 3 BHK, 4 BHK\n\ud83d\udcb0 \u20b94.62 Cr - \u20b96.67 Cr\n\n5. **Vaswani Satrlight** | Under Construction\n\ud83d\udccd Whitefield, East Bangalore | 3 BHK, 4 BHK\n\ud83d\udcb0 \u20b92.85 Cr - \u20b94.32 Cr\n\n\n\ud83d\udc49 *Say 'Details of [Project]' for deeper pitch*\n\n--- TEST SCENARIO 3: SPECIFIC PITCH ---\nUser Input: Tell me about Brigade Sanctuary\nSystem Action: **Brigade Avalon** | Under Construction\n\ud83d\udccd Whitefield, Bangalore, East Bangalore | 3 BHK, 4 BHK\n\ud83d\udcb0 \u20b94.62 Cr - \u20b96.67 Cr\n\ud83c\udfaf **Amenities**: Spacious balcony decks offering panoramic views and lavish interiors with ample space in these rare opulent homes, 30+ world-class amenities + -1 more\n\ud83d\udcc5 **Possession**: Q4 2030\n[\ud83d\udcc4 Brochure](https://drive.google.com/file/d/1yLiDJKY87p7FcQa509XUEpGsGTx1iI1t/view?usp=sharing) | \ud83d\udcde RM: {'name': 'Priya Singh', 'contact': '+91 98765 43210'}\n\n",
    "stderr": "the '/Users/anandumv/Downloads/chatbot/backend/venv/bin/python3 -m pip install --upgrade pip' command.\nWARNING:services.hybrid_retrieval:Pixeltable tables not available: (sqlite3.OperationalError) unrecognized token: \":\"\n[SQL: SELECT tables.id AS tables_id, tables.dir_id AS tables_dir_id, tables.md AS tables_md, tableschemaversions.tbl_id AS tableschemaversions_tbl_id, tableschemaversions.schema_version AS tableschemaversions_schema_version, tableschemaversions.md AS tableschemaversions_md \nFROM tables JOIN tableversions ON tables.id = tableversions.tbl_id JOIN tableschemaversions ON tables.id = tableschemaversions.tbl_id \nWHERE (tableversions.md->>'version')::int = 0 AND (tables.md->>'current_schema_version')::int = tableschemaversions.schema_version ORDER BY (tableversions.md->>'created_at')::float]\n(Background on this error at: https://sqlalche.me/e/20/e3q8). Switching to MOCK DATA.\n...\n----------------------------------------------------------------------\nRan 3 tests in 0.004s\n\nOK\n"
  }
]